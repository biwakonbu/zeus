# 要件定義 - UseCase/Actor UI 改善

## 1. 概要

UseCase ビューの左サイドバーを改善し、Actor と UseCase を統合的に管理できる UI を提供する。
表示機能に特化し、データの編集・削除機能は含まない。

## 2. 機能要件

### 2.1 タブ機能

| ID | 要件 | 優先度 |
|----|------|--------|
| TAB-001 | 3 タブ構成: [全て] [Actor] [UseCase] | 必須 |
| TAB-002 | 各タブに件数をリアルタイム表示 | 必須 |
| TAB-003 | タブ切り替え時に検索・フィルタをリセット | 必須 |
| TAB-004 | タブ切り替え時に選択状態を維持 | 必須 |

### 2.2 検索機能

| ID | 要件 | 優先度 |
|----|------|--------|
| SEARCH-001 | 名前（title）での部分一致検索 | 必須 |
| SEARCH-002 | 説明（description）での部分一致検索 | 必須 |
| SEARCH-003 | debounce 250ms | 必須 |
| SEARCH-004 | クライアントサイドでのフィルタリング | 必須 |
| SEARCH-005 | 検索入力欄にクリアボタン | 必須 |

### 2.3 フィルタ機能

| ID | 要件 | 優先度 |
|----|------|--------|
| FILTER-001 | 関連 Actor での UseCase 絞り込み | 必須 |
| FILTER-002 | フィルタは UseCase / 全て タブでのみ表示 | 必須 |
| FILTER-003 | 「全て」選択で選択解除 | 必須 |

### 2.4 リスト表示

| ID | 要件 | 優先度 |
|----|------|--------|
| LIST-001 | 名前は折り返し許可（省略禁止） | 必須 |
| LIST-002 | 関連情報をテキスト形式で表示 | 必須 |
| LIST-003 | 「全て」タブで種別ごとにグループ化表示 | 必須 |
| LIST-004 | グループヘッダーに件数表示 | 必須 |
| LIST-005 | クリックで選択、詳細パネルに反映 | 必須 |

### 2.5 レイアウト

| ID | 要件 | 優先度 |
|----|------|--------|
| LAYOUT-001 | 左サイドバーを統合リストパネルに変更 | 必須 |
| LAYOUT-002 | 右サイドバーは詳細パネルのまま維持 | 必須 |
| LAYOUT-003 | 768px 以下でレスポンシブ対応 | 必須 |

## 3. 非機能要件

### 3.1 パフォーマンス

| ID | 要件 | 基準値 |
|----|------|--------|
| PERF-001 | タブ切り替え応答時間 | < 100ms |
| PERF-002 | 検索応答時間（100 件以下） | < 50ms |
| PERF-003 | debounce 待機時間 | 250ms |

### 3.2 アクセシビリティ

| ID | 要件 |
|----|------|
| A11Y-001 | タブは role="tablist" + role="tab" |
| A11Y-002 | 検索入力に aria-label |
| A11Y-003 | フォーカス可視（focus-visible） |
| A11Y-004 | prefers-reduced-motion 対応 |

### 3.3 デザイン

| ID | 要件 |
|----|------|
| DESIGN-001 | Factorio 風デザインシステムに準拠 |
| DESIGN-002 | CSS 変数を使用 |
| DESIGN-003 | Lucide Icons を使用（Unicode Emoji 禁止） |

## 4. スコープ外

以下は本機能では対応しない:

- 関連付けの追加・解除
- データの編集・削除
- Undo 機能
- API 変更
- Entity タブ（API 未実装）

## 5. 受け入れ基準

1. 3 タブが正常に切り替わること
2. 検索で名前・説明の部分一致フィルタが機能すること
3. フィルタで関連 Actor による絞り込みが機能すること
4. 「全て」タブで Actor/UseCase がグループ化表示されること
5. 選択状態が詳細パネルに正しく反映されること
6. レスポンシブ表示が正常に機能すること
7. Factorio 風デザインが維持されていること
